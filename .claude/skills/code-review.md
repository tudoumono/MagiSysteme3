# コードレビュースキル

このスキルは、実装したコードの品質を確認し、バグや改善点を見つけるためのレビュー観点を定義します。

**目的:** コードの品質を担保し、学習効果を高める

**いつ使うか:**
- 実装完了時（動作確認前）
- ユーザーが「レビューして」「確認して」と依頼した時
- PRを作成する前
- コードに不安がある時

**重要:** 単なるバグ探しではなく、学習目的のレビューも行う。「なぜこう書いたか」を考えさせることで理解を深める。

---

## レビュー観点

### 1. 正確性（Correctness）
- [ ] 期待通りの動作をするか
- [ ] エッジケースを考慮しているか
- [ ] エラーハンドリングは適切か

### 2. 可読性（Readability）
- [ ] 変数名・関数名は意図を表しているか
- [ ] コメントは必要十分か（過剰でも不足でもない）
- [ ] 処理の流れが追いやすいか

### 3. 保守性（Maintainability）
- [ ] 重複コードはないか
- [ ] 適切に関数/クラスに分割されているか
- [ ] 変更が容易な構造か

### 4. 一貫性（Consistency）
- [ ] プロジェクトの既存コードと一貫しているか
- [ ] 命名規則に従っているか
- [ ] フォーマットは統一されているか

### 5. セキュリティ（Security）
- [ ] 機密情報（APIキー等）がハードコードされていないか
- [ ] 入力値のバリデーションは適切か
- [ ] SQLインジェクション等の脆弱性はないか

---

## レビューコメントの書き方

### 重要度の表示

| プレフィックス | 意味 | 対応 |
|---------------|------|------|
| `[MUST]` | 必須修正 | マージ前に修正が必要 |
| `[SHOULD]` | 推奨 | 可能なら修正 |
| `[NIT]` | 些細な指摘 | 対応は任意 |
| `[QUESTION]` | 質問 | 説明を求める |

### 例

```
[MUST] エラーハンドリングが不足しています。
agent.analyze() が例外を投げた場合の処理を追加してください。

[SHOULD] この変数名は `result` より `verdict` の方が意図が明確です。

[NIT] 空行を1行追加すると読みやすくなります。

[QUESTION] ここで `in` を使っている理由は何ですか？
```

---

## MAGIシステム固有のチェックポイント

### Pydanticモデル
- [ ] Fieldのdescriptionは日本語で記載されているか
- [ ] バリデーション（ge, le等）は適切か

### Strands SDK
- [ ] BedrockModelのregion_nameは正しいか
- [ ] callback_handler=Noneはストリーミング時のみか

### エージェント
- [ ] system_promptは人格を反映しているか
- [ ] 判定ロジックは部分一致（`in`）を使っているか

---

## レビュー後のアクション

```
1. フィードバックを伝える
2. [MUST]項目の修正を依頼
3. 修正後、再度確認
4. OKならマージ/次のステップへ
```

---

## 学習目的のレビュー

学習を深めるための追加質問：

- 「なぜこの実装にしましたか？」
- 「他のアプローチは考えましたか？」
- 「この部分で困ったことはありましたか？」
- 「次回同じことをする時、何か変えますか？」
